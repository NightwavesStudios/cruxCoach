<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Title -->
    <title>CruxCoach - Dashboard</title>

    <!-- Description & Charset -->
    <meta name="description"
        content="CruxCoach is a platform to track your climbing progress and improve your skills through advanced tracking and analytics as well as handcrafted multimedia lessons.">
    <meta name="keywords"
        content="learn climbing, learn bouldering, bouldering tracker, climbing tracker, rock climbing, climbing tips, bouldering, climbing lessons, climbing training">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon.png">
    <link rel="icon" href="/assets/dark-favicon.png" type="image/x-icon" media="(prefers-color-scheme: light)">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/assets/favicon.png" type="image/x-icon" media="(prefers-color-scheme: dark)">

    <!-- Import Google Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css?family=Material+Icons" rel="stylesheet">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WQXN250GC5"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-WQXN250GC5');
    </script>

    <!-- Bing Webmaster Tools -->
    <meta name="msvalidate.01" content="BB322C2C4EBBD39CAF205F27773C4459" />

    <!-- Import Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.9/dist/chart.umd.min.js"></script>

    <!--  Import Stylesheet -->
    <link rel="stylesheet" href="/styles/main.css">

</head>

<body>

    <div class="loading-screen">
        <img src="loader.png" alt="Loader Image">
    </div>

    <!-- Header -->
    <header>
        <img class="logo" src="/assets/favicon.png" alt="Header Logo">
        <h1>CruxCoach</h1>
        <span class="material-icons mode">login</span>
    </header>

    <!-- Journal Popup Container -->
    <div class="popup" id="journalPopup">
        <span class="exit material-icons" onclick="openJournal('close');">close</span>
        <h1>Journal</h1>
        <div id="journalDirectionsContainer">
            <p>Reflect on your last few climbing sessions and assess each point based on your personal performance. Use
                the following
                scale to rate each item:
                <br><br>
                -2 = Major Struggle<br>
                -1 = Minor Struggle<br>
                0 = Neutral (neither good nor bad)<br>
                1 = Minor Strength<br>
                2 = Major Strength<br><br>
                Leave any field blank if it doesn't apply or you have no inputâ€”these will default to zero and will not
                affect your
                overall data.
            </p>
        </div>
        <form id="journalForm" onsubmit="handleJournalSubmit(event)">
            <h2>Holds Review</h2>
            <label for="crimp">Crimp:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="crimp">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="sloper">Sloper:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="sloper">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="pocket">Pocket:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="pocket">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="sidepull">Sidepull:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="sidepull">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="undercling">Undercling:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="undercling">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="pinch">Pinch:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="pinch">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <h2>Angles Review</h2>
            <label for="slab">Slab:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="slab">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="slightOverhang">Slight Overhang:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="slightOverhang">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="overhang">Overhang:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="overhang">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="cave">Roof/Cave:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="cave">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <h2>Type Review</h2>
            <label for="endurance">Endurance:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="endurance">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="bigMove">Big Move:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="bigMove">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="meticulous">Meticulous:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="meticulous">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="powerful">Powerful:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="powerful">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br>
            <label for="routeReading">Route Reading:</label><br>
            <input type="range" min="-2" max="2" value="0" class="slider" id="routeReading">
            <div class="sliderticks">
                <p>-2</p>
                <p>-1</p>
                <p>0</p>
                <p>1</p>
                <p>2</p>
            </div><br><br><br><br><br><br><br><br>
            <div class="submit-button-cover"></div>
            <button type="submit" onclick="openJournal('close');">Submit</button>
        </form>
    </div>

    <!-- Quick Log Popup Container -->
    <div class="popup" id="logPopup">
        <span class="exit material-icons" onclick="openLog('close');">close</span>
        <h1>Log Session</h1>
        <div id="quickLogDirectionsContainer">
            <p>Log a climbing session with the type of climbing, average grade you climbed on, and the difficulty you
                would assocoiate with that median grade.</p>
        </div>
        <form id="logForm" onsubmit="handleLogSubmit(event)">
            <label for="type">Climbing Type: </label>
            <select id="type" name="type" required>
                <option value="" disabled selected>Select Climbing Type</option>
                <option value="bouldering">Bouldering</option>
                <option value="toprope">Top Rope</option>
                <option value="lead">Lead</option>
                <option value="other">Other</option>
            </select><br><br><br>
            <label for="grade">Median Grade:</label>
            <input id="grade" placeholder="Ex: V4, 5.9, 5.11c" required></input><br><br><br>
            <label for="difficulty">Climbing Difficulty: </label>
            <select id="difficulty" name="difficulty" required>
                <option value="" disabled selected>Select Difficulty</option>
                <option value="flash">Flash/On-Sight</option>
                <option value="project">Project/Redpoint</option>
            </select><br><br><br>
            <div class="submit-button-cover"></div>
            <button type="submit">Submit</button>
        </form>
    </div>

    <!-- Content -->
    <div id="contentContainer">

        <!-- Options Container -->
        <div id="optionsContainer">

            <!-- Form Option -->
            <button class="blue" onclick="openJournal();">
                <span class="material-icons" alt="Journal Icon">description</span>
                <h3>Journal Entry</h3>
                <p>Log your various climbing points</p>
            </button>

            <!-- Quick Log Option -->
            <button class="orange" onclick="openLog();">
                <span class="material-icons" alt="Plus Button Icon">add_circle</span>
                <h3>Log Session</h3>
                <p>Log a climb or training session</p>
            </button>

            <!-- Coach Analysis Option -->
            <button class="green" onclick="openCoach();">
                <span class="material-icons" alt="Phone Camera Icon">screenshot</span>
                <h3>Coach Analysis</h3>
                <p>Get feedback from uploaded clips.</p>
            </button>

        </div>

        <!-- Grade Progression Container -->
        <div id="gradeProgressionContainer">

            <!-- Boulder Flash -->
            <div>
                <p><b id="boulderingFlash">NaN</b></p>
                <p>Flash</p>
            </div>

            <!-- Boulder Project -->
            <div>
                <p><b id="boulderingProject">NaN</b></p>
                <p>Project</p>
            </div>

            <!--Sport On-Sight -->
            <div>
                <p><b id="ropedOnsight">NaN</b></p>
                <p>On-Sight</p>
            </div>

            <!-- Sport Redpoint -->
            <div>
                <p><b id="ropedRedpoint">NaN</b></p>
                <p>Redpoint</p>
            </div>

        </div>

        <!-- Training Distribution Chart Container -->
        <div id="trainingDistributionChartContainer">
            <button class="info-button" onclick="toggleInfoPopup('trainingInfoPopup', this)">
                <span class="material-icons">info</span>
            </button>
            <canvas id="trainingDistributionChart"></canvas>
            <p id="noTrainingDataMessage" style="display:none;">No Data Available Yet. Log a Session!</p>

            <!-- Info Popup -->
            <div id="trainingInfoPopup" class="info-popup">
                <p>This chart shows the distribution of your training types (e.g., Bouldering, Top Rope, Lead, etc.).
                    Use this to analyze how you allocate your climbing time.</p>
                <button onclick="toggleInfoPopup('trainingInfoPopup', this)">Close</button>
            </div>
        </div>

        <!--Training Distribution Info Popup -->
        <div id="trainingInfoPopup" class="info-popup">
            <p>This chart shows the distribution of your training types (e.g., Bouldering, Top Rope, Lead, etc.). Use
                this to
                analyze how you allocate your climbing time.</p>
            <button onclick="toggleInfoPopup('trainingInfoPopup', this)">Close</button>
        </div>

        <!-- Struggle/Strongpoint Container -->
        <div id="struggleStrongContainer">

            <!-- Column 1 -->
            <div>
                <p><span id="Crimp">0</span> Crimp</p>
                <p><span id="Sloper">0</span> Sloper</p>
                <p><span id="Pocket">0</span> Pocket</p>
                <p><span id="Sidepull">0</span> Sidepull</p>
                <p><span id="Undercling">0</span> Undercling</p>
            </div>

            <!-- Column 2 -->
            <div>
                <p><span id="Pinch">0</span> Pinch</p>
                <p><span id="Bigmove">0</span> Big Move</p>
                <p><span id="Meticulous">0</span> Meticulous</p>
                <p><span id="Powerful">0</span> Powerful</p>
                <p><span id="Routereading">0</span> Route-Reading</p>
            </div>

            <!-- Column 3 -->
            <div>
                <p><span id="Endurance">0</span> Endurance</p>
                <p><span id="Slab">0</span> Slab</p>
                <p><span id="Slightoverhang">0</span> Slight Overhang</p>
                <p><span id="Overhang">0</span> Overhang</p>
                <p><span id="Cave">0</span> Roof/Cave</p>
            </div>

        </div>

        <!-- Holds Breakdown Chart Container -->
        <div id="holdsBreakdownContainer">
            <h3>Holds Breakdown</h3>
            <button class="info-button" onclick="toggleInfoPopup('holdsBreakdownInfoPopup', this)">
                <span class="material-icons">info</span>
            </button>
            <canvas id="holdsBreakdownChart"></canvas>
        </div>

        <!-- Holds Breakdown Info Popup -->
        <div id="holdsBreakdownInfoPopup" class="info-popup">
            <p>Shows the holds you are most and least comfortable. Holds far right you can focus less on while holds to
                the left you need to improve in. Holds near the center are neither a strong or weaksuit of yours.</p>
            <button onclick="toggleInfoPopup('holdsBreakdownInfoPopup', this)">Close</button>
        </div>

        <!-- Style Breakdown Chart Container -->
        <div id="styleBreakdownContainer">
            <h3>Style Breakdown</h3>
            <button class="info-button" onclick="toggleInfoPopup('styleBreakdownInfoPopup', this)">
                <span class="material-icons">info</span>
            </button>
            <canvas id="styleBreakdownChart"></canvas>
        </div>

        <!-- Style Breakdown Info Popup -->
        <div id="styleBreakdownInfoPopup" class="info-popup">
            <p>Datapoints close to their name making a nice smooth shape are good while others far away and on the
                opposite side are styles that aren't your best. Points in the middle are neutral and signify that you
                neither are strong or weak in that style of climbing.</p>
            <button onclick="toggleInfoPopup('styleBreakdownInfoPopup', this)">Close</button>
        </div>

        <!-- Angle Breakdown Chart Container -->
        <div id="angleBreakdownContainer">
            <h3>Wall Angle Breakdown</h3>
            <button class="info-button" onclick="toggleInfoPopup('angleInfoPopup', this)">
                <span class="material-icons">info</span>
            </button>
            <canvas id="wallAngleChart"></canvas>
        </div>

        <!-- Angle Breakdown Info Popup -->
        <div id="angleInfoPopup" class="info-popup">
            <p>Show your strong and weak climbing wall angles.</p>
            <button onclick="toggleInfoPopup('angleInfoPopup', this)">Close</button>
        </div>

        <!-- Nav -->
        <br><br><br>
        <nav>
            <a href="/index.html" class="material-icons" alt="Dashboard Icon" title="Dashboard">show_chart</a>
            <a href="/../train/index.html" class="material-icons" alt="Lessons Icon" title="Lessons">school</a>
            <a href="/profile.html" class="material-icons" alt="Profile Icon" title="Profile">person</a>
        </nav>

    </div>

    <!-- Import Javascript -->
    <script src="/scripts/main.js"></script>

</body>

</html>